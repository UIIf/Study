Курсовая по теме: Создание прототипа игры на Unity

1. Поставленные задачи:
	Передо мной стояла цель создания искусственного интеллекта противников, добавление оружия, доработка генератора комнат, а так же работа с прицелом.

2. Прицел игрока:

	Так как это шутер необходимо каким-то образом целиться.

	Для того чтобы получить точку в пространстве куда показывает курсор игрока каждый кадр создается временная плоскость на уровне игрока, дальше при помощи встроенных методов пускается луч из камеры по направлению курсора, находится точка пересечения. Эта точка и является прицелом.

	В большинстве Top-down шутеров камера зафиксирована сверху, что делает мир игры плоским и не выделяющимся. По задумке камера будет передвигаться на определенном расстояния от игрока. Таким образом даже стоя на одном месте можно будет увидеть карту с разных сторон. 

	Камера постоянно находится на 30% расстояния между игроком и его прицелом и тут пришлось вводить ограничения на максимальное расстояние, на которое может отдалиться камера.

Видик крутится:
	В процессе реализации была обнаружена ошибка, из-за которой игрок мог выстрелить сам в себя и это так же пришлось исправлять добавляя новое ограничение. "Смотрите, крутится"

3. Строение комнаты:
	Квартир состоят из различных элементов. Так как в Unity координаты хранятся как числа с плавающей точкой, то если игрок убежит достаточно далеко, точность его перемещения заметно ухудшится, для этого при создании комнаты проверяется координата ее середины, и если она больше по модулю определенного значения, то во всех ее внешних стенах будут отсутствовать проемы.

Видик крутится:
	Вот демонстрация из чего состоит комната, в зависимости от ее назначения внутренняя часть может меняться. Тут красные сферы -- точки по которым патрулирует противник, желтые -- точки на которых он появляется

4. Зрение противников:
	Необходимо было сделать нетребовательное обнаружение игрока, а так же ограничить его угол обзора, и добавить зону зайдя в которую в любом случае враг отреагирует.

	Есть несколько путей реализации, например пускать n количество лучей во все стороны, но хоть лучи и нетребовательные, но это все равно не лучший вариант. Было решено сделать так что в каждый момент времени противник знает где находится игрок, и пускает луч только в крайних случаях, когда цель находится в поле зрения и необходимо узнать есть ли преграды между.

	Для начала проверяется, расстояние между игроком и противником, дальше при помощи скалярного произведения находится угол и проверяется входит ли игрок в поле зрения противника и только потом пускается луч до игрока.

Видик крутится:
	Зеленым - игрок слишком далеко
	Желтый - игрок вне угла зрения
	Красный - игрок за преградой
	Синий - игрока видно

5. Поведение противников:
	При реализации интеллекта противников было решено ограничиться несколькими состояниями:
	патрулирование, преследование, осматривание и оглушение. 

	При патрулировании, противник будет просто ходить по своему маршруту по комнате
	При преследовании, будет идти до за игроком
	осматривание же срабатывает когда противник только потерял игрока из виду, в этом состоянии он передвигается на точку где последний раз видел игрока.

Видик крутится:
	Вот на видике видно как игрок стреляет и противники бегут на шум, потом игрок прячется в углу комнаты, враги идут на последнее место где его видели и разворачиваются. 

6. Оружие:
	
	Для стрельбы были использованы лучи, так как они быстро обрабатываются, а если при запуске луча использовать маску которая отделает декоративные объекты от действительно важных, то производительность сильно увеличится.

	Так же можно добавить другие типы оружия, так как был создан интерфейс для оружия.

	При создании нового образца оружия, достаточно просто поменять пару настроек, таких как:
		Скорострельность
		Урон
		Количество патронов
		и т.д.

Видик крутится:

	При попадании, если объект является потомком класса гуманоид, он получает урон, вне зависимости от того, главный герой это или же противник.

Заключение:
	Таким образом в этой работе я сделал:
		Прицел игрока
		Доработал генерацию комнат
		Сделал простой интеллект противников
		Добавлю оружие
